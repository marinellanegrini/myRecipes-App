<ion-header>
  <ion-toolbar color="primary" text-center>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title *ngIf="(ricetta$ | async) as ricetta">{{ricetta.nome}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content padding>
  <div *ngIf="(ricetta$ | async) as ricetta">
    <span>
      <ion-text>
        <h1><b>{{ricetta.nome}}</b></h1>
      </ion-text>
      <ion-icon size="large" name="heart-empty" class="heart" color="tertiary"></ion-icon>
    </span>

    <div>

      <ion-slides pager="true">
        <ion-slide>
          <img src="data:{{ricetta.immagine.type}};base64,{{ricetta.immagine.data}}"/>
        </ion-slide>
        <ion-slide *ngFor="let img of ricetta.imgpreparazione">
          <img src="data:{{img.type}};base64,{{img.data}}" />
        </ion-slide>
      </ion-slides>
    </div>

    <div>
      <p>
        {{ 'TPREP' | translate }}
        <ion-icon name="time"></ion-icon>
        {{ricetta.tprep}}
      </p>
      <p>
        {{ 'CATEGORIA' | translate }}:
        {{ricetta.categoria.nome}}
      </p>
      <p>
        {{ 'DIFFICOLTA' | translate }}
        <ion-icon name="star"></ion-icon>
        <ion-icon [hidden]="(ricetta.difficolta<2)" name="star"></ion-icon>
        <ion-icon [hidden]="(ricetta.difficolta<3)" name="star"></ion-icon>
        <ion-icon [hidden]="(ricetta.difficolta<4)" name="star"></ion-icon>
        <ion-icon [hidden]="(ricetta.difficolta<5)" name="star"></ion-icon>
      </p>
      <p>
        {{ 'NDOSI' | translate }}
        <ion-icon name="restaurant"></ion-icon>
        {{ricetta.ndosi}}
      </p>

    </div>

    <div>
      <h6>
        <b>
          {{ 'INGREDIENTI' | translate }}
        </b>
      </h6>
    </div>

    <div>
      <ul>
        <li *ngFor="let i of ricetta.ingredienti">
          {{i.qta}} {{i.cibo.um}} {{i.cibo.nome}}
        </li>
      </ul>
    </div>

    <div>
      <h6>
        <b>
          {{ 'PROCEDIMENTO' | translate }}
        </b>
      </h6>
    </div>

    <div>
      <ion-text>
        {{ricetta.procedimento}}
      </ion-text>
    </div>

    <div margin-top="30px" align="center">
      <ion-button size="medium" shape="round" color="tertiary" (click)="onSubmit()" tappable>
        {{ 'COMMENTA-BUTTON' | translate }}
      </ion-button>
    </div>

    <div>
      <h6>
        <b>
          {{ 'COMMENTIRICETTA' | translate }}
        </b>
      </h6>
    </div>


    <ion-list>
      <ion-item *ngFor="let commento of ricetta.commenti">
        <ion-avatar slot="start">
          <img src="http://1.citynews-today.stgy.ovh/~media/original-hi/40093515674280/pasta-tutti-i-giorni-2.jpg">
        </ion-avatar>
        <ion-label>
          <p>
            <b>
              {{utente.username}}
            </b>
          </p>
          <p>
            {{commento.testo}}
          </p>
        </ion-label>

        <span>
          <ion-text slot="end" color="dark">
              <p class="datacommento" text-end="true">{{commento.data}} <br> {{commento.ora}}</p>
          </ion-text>
        </span>
      </ion-item>
    </ion-list>








  </div>

</ion-content>
